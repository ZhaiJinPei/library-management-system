"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[614],{3614:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});a(560);var r=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{padding:"10px"}},[e("div",{staticStyle:{width:"99%","margin-left":"3px","padding-top":"5px",height:"20px","font-family":"'roboto mono', monospace",background:"#ffffff","border-radius":"5px"}},[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",[t._v(" "),e("em",[e("strong",[t._v("Administrators 管理员")])])]),e("el-breadcrumb-item",[t._v(" "),e("em",[e("strong",[t._v("Admin List 管理员详情")])])])],1)],1),e("div",{staticStyle:{"margin-bottom":"5px","margin-top":"5px"}},[e("el-input",{staticStyle:{width:"200px","margin-left":"2px"},attrs:{placeholder:"Enter admin email"},model:{value:t.params.email,callback:function(e){t.$set(t.params,"email",e)},expression:"params.email"}}),e("el-input",{staticStyle:{width:"200px","margin-left":"2px"},attrs:{placeholder:"Enter username"},model:{value:t.params.username,callback:function(e){t.$set(t.params,"username",e)},expression:"params.username"}}),e("el-button",{staticStyle:{"margin-left":"2px",height:"40px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.load}},[t._v("Search")]),e("el-button",{staticStyle:{"margin-left":"3px",height:"40px"},attrs:{icon:"el-icon-refresh-right",type:"warning"},on:{click:t.reset}},[t._v(" Reset ")])],1),e("el-table",{staticStyle:{"margin-left":"3px",width:"99%","font-size":"24px","font-family":"'roboto mono', monospace"},attrs:{data:t.tableData,stripe:""}},[e("el-table-column",{attrs:{label:"Status",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-switch",{attrs:{width:"50","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(e){return t.changeStatus(a.row)}},model:{value:a.row.status,callback:function(e){t.$set(a.row,"status",e)},expression:"scope2.row.status"}})]}}])}),e("el-table-column",{attrs:{prop:"username",label:"Username",width:"130"}}),e("el-table-column",{attrs:{label:"First Name",prop:"fname",width:"160"}}),e("el-table-column",{attrs:{label:"Last Name",prop:"lname",width:"150"}}),e("el-table-column",{attrs:{label:"Email",prop:"email",width:"300"}}),e("el-table-column",{attrs:{label:"Province/State",prop:"province",width:"210"}}),e("el-table-column",{attrs:{label:"City",prop:"city",width:"250"}}),e("el-table-column",{attrs:{label:"Street",prop:"street",width:"250"}}),e("el-table-column",{attrs:{label:"Phone",prop:"phone",with:"180"}}),e("el-table-column",{attrs:{label:"Operations"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/editAdmin?email="+a.row.email)}}},[t._v("Edit")]),e("el-popconfirm",{attrs:{"confirm-button-text":"Yes","cancel-button-text":"No",title:"Are you sure you want to delete this row of data？"},on:{confirm:function(e){return t.del(a.row.email)}}},[e("el-button",{staticStyle:{"margin-left":"5px"},attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("Delete")])],1),e("el-popconfirm",{attrs:{"confirm-button-text":"Yes","cancel-button-text":"No",title:"Are you sure you want to reset this admin's password？"},on:{confirm:function(e){return t.resetPass(a.row)}}},[e("el-button",{staticStyle:{"margin-left":"5px"},attrs:{slot:"reference",type:"warning"},slot:"reference"},[t._v("Reset")])],1)]}}])})],1),e("el-pagination",{staticStyle:{"margin-top":"5px"},attrs:{background:"","current-page":t.params.pageNum,"page-size":t.params.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.changePageNum}})],1)},s=[],i=a(4471),n=a(680),l={name:"List",data(){return{admin:n.Z.get("admin")?JSON.parse(n.Z.get("admin")):{},tableData:[],total:0,form:{},params:{pageNum:1,pageSize:15,email:"",username:""}}},created(){this.load()},methods:{load(){i.Z.get("admin/page",{params:this.params}).then((t=>{"200"===t.code&&(this.tableData=t.data.list,this.total=t.data.total)}))},reset(){this.params={pageNum:1,pageSize:10,email:"",username:""},this.load()},del(t){i.Z.delete("admin/delete/"+t).then((t=>{"200"===t.code?(this.$notify.success("Deleted"),this.load()):this.$notify.error(t.msg)}))},resetPass(t){this.form=JSON.parse(JSON.stringify(t)),i.Z.put("admin/resetPass",this.form).then((t=>{"200"===t.code?(this.$notify.success("Password reset"),this.form.email===this.admin.email&&(n.Z.remove("admin"),this.$router.push("/login"))):this.$notify.error(t.msg)}))},changeStatus(t){this.admin.email!==t.email||t.status?i.Z.put("admin/update",t).then((t=>{"200"===t.code?(this.$notify.success("Status updated"),this.load()):this.$notify.error(t.msg)})):(this.$notify.warning("Illegal Operation"),t.status=!0)},changePageNum(t){this.params.pageNum=t,this.load()}}},o=l,m=a(1001),c=(0,m.Z)(o,r,s,!1,null,"af5870fa",null),p=c.exports}}]);
//# sourceMappingURL=614.28631515.js.map