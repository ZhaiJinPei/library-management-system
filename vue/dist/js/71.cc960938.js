"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[71],{3071:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{padding:"10px"}},[t("div",{staticStyle:{width:"99%","margin-left":"5px","padding-top":"5px",height:"20px","font-family":"'roboto mono', monospace",background:"#ffffff","border-radius":"5px"}},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[e._v(" "),t("em",[t("strong",[e._v("Book Borrow 图书借阅")])])]),t("el-breadcrumb-item",[e._v(" "),t("em",[t("strong",[e._v("New Borrow Record 新增借阅记录")])])])],1)],1),t("div",{staticStyle:{"font-size":"50px","font-family":"'roboto mono', monospace","margin-left":"50px","margin-bottom":"50px","margin-top":"50px"}},[e._v(" Add New Borrow Record 新增借阅记录 ")]),t("div",{staticStyle:{width:"40%",transform:"scale(2,2)","margin-left":"500px","margin-top":"250px"}},[t("el-form",{ref:"ruleForm",attrs:{inline:!0,model:e.form,rules:e.rules,size:"30px"}},[t("el-form-item",{staticStyle:{"margin-left":"2px"},attrs:{label:"ISBN 国际标准书号: ",prop:"isbn"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"Please select ISBN"},on:{change:e.selectBook},model:{value:e.form.isbn,callback:function(t){e.$set(e.form,"isbn",t)},expression:"form.isbn"}},e._l(e.books,(function(e){return t("el-option",{key:e.isbn,attrs:{label:e.isbn,value:e.isbn}})})),1)],1),t("el-form-item",{staticStyle:{"margin-left":"2px"},attrs:{label:"Book Name 书名: ",prop:"name"}},[t("el-input",{attrs:{placeholder:"Enter book's name",disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{staticStyle:{"margin-left":"2px"},attrs:{id:"credit",label:"Need Credit 所需信誉分: ",prop:"credit"}},[t("el-input",{attrs:{placeholder:"Enter credit",disabled:""},model:{value:e.form.credit,callback:function(t){e.$set(e.form,"credit",t)},expression:"form.credit"}})],1),t("el-form-item",{staticStyle:{"margin-left":"2px"},attrs:{id:"number",label:"Number 借阅数量: ",prop:"number"}},[t("el-input",{attrs:{placeholder:"Enter a number",disabled:""},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),t("el-form-item",{staticStyle:{"margin-left":"2px"},attrs:{label:"User ID: ",prop:"uid"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"Please select an user ID"},on:{change:e.selectUser},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}},e._l(e.users,(function(e){return t("el-option",{key:e.email,attrs:{label:e.uid,value:e.email}})})),1)],1),t("el-form-item",{staticStyle:{"margin-left":"2px"},attrs:{label:"Phone 电话号: ",prop:"phone"}},[t("el-input",{attrs:{placeholder:"Enter phone number",disabled:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),t("el-form-item",{staticStyle:{"margin-left":"2px"},attrs:{label:"Username 用户名: ",prop:"username"}},[t("el-input",{attrs:{placeholder:"Enter username",disabled:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{staticStyle:{"margin-left":"2px"},attrs:{label:"Score Left 用户剩余积分: ",prop:"acredit"}},[t("el-input",{attrs:{placeholder:"Enter score value",disabled:""},model:{value:e.form.acredit,callback:function(t){e.$set(e.form,"acredit",t)},expression:"form.acredit"}})],1),t("el-form-item",{staticStyle:{"margin-left":"2px"},attrs:{label:"Borrow Days 借阅天数: ",prop:"duration"}},[[t("el-input-number",{attrs:{min:1,max:10},on:{change:e.handleChange},model:{value:e.form.duration,callback:function(t){e.$set(e.form,"duration",t)},expression:"form.duration"}})]],2)],1),t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{staticStyle:{height:"40px","min-width":"100px"},attrs:{type:"primary"},on:{click:e.save}},[e._v("Submit")])],1)],1)])},o=[],l=r(4471),i={name:"Add",data(){const e=(e,t,r)=>{t||r(new Error("Please enter the book's ISBN")),/^[0-9]{10}$/.test(t)||r(new Error("Illegal ISBN")),r()},t=(e,t,r)=>{t||r(new Error("Please enter the email address")),/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(t)||r(new Error("Illegal email address")),r()},r=(e,t,r)=>{t||r(new Error("Please enter the phone number")),/^[1,2,3,4,5,6,7,8,9][0-9]{9,10}$/.test(t)||r(new Error("Illegal phone number")),r()};return{form:{duration:1},books:[],users:[],unitCredit:0,rules:{username:[{required:!0,message:"Please enter the username",trigger:"blur"}],name:[{required:!0,message:"Please enter the book's name",trigger:"blur"}],credit:[{required:!0,message:"Please enter the book's credit",trigger:"blur"}],email:[{required:!0,validator:t,trigger:"blur"}],phone:[{required:!0,validator:r,trigger:"blur"}],isbn:[{required:!0,validator:e,trigger:"blur"}]}}},created(){l.Z.get("/book/list").then((e=>{this.books=e.data})),l.Z.get("/user/list").then((e=>{this.users=e.data.filter((e=>e.status))}))},methods:{save(){this.$refs["ruleForm"].validate((e=>{e&&l.Z.post("borrow/save",this.form).then((e=>{"200"===e.code?(this.$notify.success("Submitted"),this.$refs["ruleForm"].resetFields(),location.reload()):this.$notify.error(e.msg)}))}))},selectBook(){const e=this.books.find((e=>e.isbn===this.form.isbn));l.Z.get("/book/"+e.isbn).then((e=>{this.form.name=e.data.name,this.form.credit=e.data.credit,this.form.number=e.data.number,this.unitCredit=e.data.credit,this.$forceUpdate()}))},selectUser(){const e=this.users.find((e=>e.email===this.form.email));l.Z.get("/user/"+e.email).then((e=>{this.form.phone=e.data.phone,this.form.username=e.data.username,this.form.acredit=e.data.acredit,this.$forceUpdate()}))},handleChange(){this.form.credit=this.form.duration*this.unitCredit}}},s=i,n=r(1001),m=(0,n.Z)(s,a,o,!1,null,"7a256280",null),d=m.exports}}]);
//# sourceMappingURL=71.cc960938.js.map